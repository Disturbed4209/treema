<html>
<head>
  <script type="text/javascript" src="jquery-1.8.1.js"></script>
  <script type="text/javascript" src="jquery-ui-1.10.3.custom.js"></script>
  <script type="text/javascript" src="tv4.js"></script>
  <script type="text/javascript" src="ace.js"></script>
  <script type="text/javascript" src="treema.js"></script>
  <link rel="stylesheet" href="treema.css">
  <link rel="stylesheet" href="jquery-ui-1.10.3.custom.css">
</head>
<body>

<h1>Test</h1>

<div id="test-area">
  
</div>

<script type="text/javascript">
  (function(a){if(window.filepicker){return}var b=a.createElement("script");b.type="text/javascript";b.async=!0;b.src=("https:"===a.location.protocol?"https:":"http:")+"//api.filepicker.io/v1/filepicker.js";var c=a.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c);var d={};d._queue=[];var e="pick,pickMultiple,pickAndStore,read,write,writeUrl,export,convert,store,storeUrl,remove,stat,setKey,constructWidget,makeDropPane".split(",");var f=function(a,b){return function(){b.push([a,arguments])}};for(var g=0;g<e.length;g++){d[e[g]]=f(e[g],d._queue)}window.filepicker=d})(document);
</script>

<script type="text/javascript">

  var jade = {};
  $(document).ready(function () {
    data = {
      'restaurants': [{"id":96,"name":"Nathan's Famous"},{"id":90,"name":"McDonald's"},{"id":37,"name":"Del Taco"},{"id":17,"name":"Braum's"},{"id":21,"name":"Cafe Rio"}],
//      'locality': 'Berkeley',
//      'region': 'California',
//      'country-name': 'USA',
//      'postal-code': 94703,
//      'is-home-address': true,
//      'phone-numbers': ['1-800-938-3000', '1-234-567-8900 x1337'],
//      'post-office-box': null,
//      'extended-address': {1:2},
//      'street-address': '2338 1/2 Roosevelt Ave'
      hackery: "var i = 0;"
    };
    schema = {
      "additionalProperties": false,
      "description": "An Address following the convention of http://microformats.org/wiki/hcard",
      "type": "object",
      "properties": {
        "post-office-box": { title: "PO Box", type: ['null', 'string'] },
        "street-address": { title: "Address 1", description: "Don't forget the number." },
        "extended-address": { title: "Address 2" },
        "locality":{ "type": "string", title: "Locality", 'default': 'Berkeley', minLength:2 },
        "region": { 'title': 'Region', type: 'string', 'default': 'California' },
        "postal-code": { "type": "number", title: "Zip Code", minimum:10000, maximum: 99999 },
        "country-name": { "type": "string", title: "Country", 'default': 'USA', enum:['USA', 'Mars'] },
        "is-home-address": { type: 'boolean', title: "Is Home" },
        "phone-numbers": { "type": "array", items: { type: "string", maxLength: 20, minLength:4 }, title: "Phone #s" },
        "restaurants": { "type": "array", items: {format: "restaurant"}, title: 'Favorite Fast Food', uniqueItems: true },
        "hackery": { type: "string", format: "ace", aceMode: "ace/mode/javascript" }
      },
      "required": ['locality', 'region', 'country-name'],
      "dependencies": {
        "post-office-box": "street-address",
        "extended-address": "street-address"
      }
    };

    treema = makeTreema(schema, data);
    $('#test-area').append(treema.build())
    window.treema = treema
  });
  
</script>

</body>
</html>